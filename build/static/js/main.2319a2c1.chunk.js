(this.webpackJsonpgoustito=this.webpackJsonpgoustito||[]).push([[0],{41:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(23),r=n.n(s),a=n(10),i=n(18),o=n(43),u=n(44),l=n(27),j=n(15),d={recipes:[],resultsShown:{from:0,to:10},isLoading:!1},b=n(8),h=n.n(b),p=n(22),f=n(16),O=n(26),x=n.n(O),m="&app_id=".concat("502b5108","&app_key=").concat("2dd316a833c66ab75a2fb3b70856053f","&from=0&to=99"),v=function(e,t){var n=function(e){var t=e.split(" ");return 1===t.length?t[0]:t.join("%20")}(e),c=function(e){if(0===e.length)return"";var t="";return e.forEach((function(e){t="".concat(t).concat(e,"+")})),t}(t),s="";return s="".concat("https://api.edamam.com/search","?q=").concat(n).concat(m),c&&(s="".concat(s,"&mealType=").concat(c)),s},g=function(e,t){return Object(f.a)(h.a.mark((function n(){var c,s;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=v(e,t),n.next=3,x.a.get(c);case 3:return s=n.sent,n.abrupt("return",s.data);case 5:case"end":return n.stop()}}),n)})))()},w=h.a.mark(N),S=h.a.mark(y),C=h.a.mark(E);function N(e){var t;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(p.b)(g,e.payload.searchTerms,e.payload.mealTypes);case 2:return t=n.sent,n.next=5,Object(p.c)({type:"SET_RECIPES",payload:t.hits});case 5:case"end":return n.stop()}}),w)}function y(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.d)("GET_RECIPES",N);case 2:case"end":return e.stop()}}),S)}function E(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)([y()]);case 2:case"end":return e.stop()}}),C)}var k=Object(u.a)(),P=Object(i.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_RECIPES":return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0});case"SET_RECIPES":return Object(j.a)(Object(j.a)({},e),{},{recipes:[t.payload],resultsShown:{from:0,to:10},isLoading:!1});case"ADD_RECIPES":return Object(j.a)(Object(j.a)({},e),{},{recipes:[].concat(Object(l.a)(e.recipes),[t.payload.recipes])});case"SHOW_NEXT_PAGE":return Object(j.a)(Object(j.a)({},e),{},{resultsShown:{from:e.resultsShown.from+10,to:e.resultsShown.to+10}});case"SHOW_PREVIOUS_PAGE":return Object(j.a)(Object(j.a)({},e),{},{resultsShown:{from:e.resultsShown.from-10,to:e.resultsShown.to-10}});default:return e}}),Object(o.composeWithDevTools)(Object(i.applyMiddleware)(k)));k.run(E);var T,_=n(19),I=n(7),R=function(e,t){return{type:"GET_RECIPES",payload:{searchTerms:e,mealTypes:t}}},L=function(e,t){"next"===e&&t({type:"SHOW_NEXT_PAGE"}),"previous"===e&&t({type:"SHOW_PREVIOUS_PAGE"}),window.scrollTo({top:0,behavior:"smooth"})},V=(n(72),n(0)),D=function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return 0===e.resultsShown.from})),n=Object(a.c)((function(e){return 100===e.resultsShown.to})),c=Object(a.c)((function(e){var t;return(null===(t=e.recipes[0])||void 0===t?void 0:t.length)>0}));return Object(V.jsxs)("div",{className:"page-navigation",children:[Object(V.jsx)("button",{className:"".concat((n||!c)&&"hide"),onClick:function(){return L("next",e)},children:"Next"}),Object(V.jsx)("button",{className:"".concat(t&&"hide"),onClick:function(){return L("previous",e)},children:"Previous"})]})},G=n(6),U=(n(41),function(){return Object(V.jsxs)("div",{className:"info",children:[Object(V.jsx)("h1",{children:"Click the star to save a recipe to your bank"}),Object(V.jsx)("p",{children:"Due to the limitations of the free api, only the first 100 results found can be scrolled through"})]})}),A=function(e){var t=Object(c.useState)(e),n=Object(G.a)(t,2),s=n[0],r=n[1],a=Object(c.useCallback)((function(){return r(!s)}),[s]);return[s,a]},H=function(e){var t=e.ingredients;return Object(V.jsx)("ul",{className:"ingredient-list",children:t.map((function(e){return Object(V.jsx)("li",{children:e},e)}))})},W=(n(74),function(e){var t=e.label,n=e.url,c=e.img,s=e.calories,r=e.source,a=e.ingredients,i=e.servings,o=A(!0),u=Object(G.a)(o,2),l=u[0],j=u[1];return Object(V.jsxs)("section",{className:"recipe",onClick:j,children:[Object(V.jsx)("h1",{children:t}),Object(V.jsxs)("div",{className:"".concat(l&&"hide"),children:[Object(V.jsx)(H,{ingredients:a}),Object(V.jsxs)("p",{children:["Calories: ",Math.floor(s)]}),Object(V.jsxs)("p",{children:["Servings: ",i," "]})]}),Object(V.jsx)("img",{src:c,alt:"food"}),Object(V.jsx)("div",{}),Object(V.jsx)("a",{href:n,children:r})]})}),q=function(){var e=Object(c.useState)([]),t=Object(G.a)(e,2),n=t[0],s=t[1],r=Object(a.c)((function(e){return e.recipes[0]})),i=Object(a.c)((function(e){return e.resultsShown}));return Object(c.useEffect)((function(){var e=null===r||void 0===r?void 0:r.slice(i.from,i.to);s(e)}),[i,r]),Object(V.jsxs)("section",{className:"recipe-list",children:[(null===n||void 0===n?void 0:n.length)>0&&Object(V.jsx)(U,{}),Object(V.jsx)("div",{}),Object(V.jsx)("ul",{children:n&&n.map((function(e){return Object(V.jsx)("li",{children:Object(V.jsx)(W,{label:e.recipe.label,url:e.recipe.url,img:e.recipe.image,calories:e.recipe.calories,source:e.recipe.source,ingredients:e.recipe.ingredientLines,servings:e.recipe.yield})},e.recipe.id)}))})]})},B=function(e){var t=Object(c.useState)(""),n=Object(G.a)(t,2),s=n[0],r=n[1];return{type:e,value:s,onChange:function(e){r(e.target.value)}}},F=function(e){var t=e.label,n=e.handleCheckboxChange,s=Object(c.useState)(!1),r=Object(G.a)(s,2),a=r[0],i=r[1];return Object(V.jsx)("div",{className:"checkbox",children:Object(V.jsxs)("label",{children:[Object(V.jsx)("input",{type:"checkbox",value:t,checked:a,onChange:function(){i(!a),n(t)}}),t]})})},J=function(e){var t=e.categories,n=e.handleCheckboxChange;return Object(V.jsx)("div",{className:"checkbox-array",children:t.map((function(e){return Object(V.jsx)(F,{label:e,handleCheckboxChange:n},e)}))})},M=["Breakfast","Lunch","Dinner","Snack"],X=function(){var e=Object(a.b)(),t=B("text"),n=Object(c.useState)([]),s=Object(G.a)(n,2),r=s[0],i=s[1],o=function(){var n=Object(f.a)(h.a.mark((function n(c){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c.preventDefault(),e(R(t.value,M));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(V.jsxs)("form",{onSubmit:o,children:[Object(V.jsx)("input",{className:"search-input",type:t.type,value:t.value,onChange:t.onChange,placeholder:"search recipes"}),Object(V.jsx)(J,{categories:M,handleCheckboxChange:function(e){if(r.includes(e)){var t=r.filter((function(t){return t!==e}));i(t)}else i([].concat(Object(l.a)(r),[e]))}}),Object(V.jsx)("input",{type:"submit",className:"submit-button"})]})},Y=function(){return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("h3",{children:"Search through over 2.3 million recipes from all over the web!"}),Object(V.jsx)("p",{children:"Click on a recipe card to see the ingredients and calories!"}),Object(V.jsx)("p",{children:"Click the link on the recipe card to visit the recipe page!"})]})},$=(n(75),function(){return Object(V.jsxs)("section",{className:"search-bar",children:[Object(V.jsx)(Y,{}),Object(V.jsx)(X,{})]})}),z=n.p+"static/media/loading-icon.ffc3c7e1.gif",K=(n(76),function(){return Object(a.c)((function(e){return e.isLoading}))?Object(V.jsxs)("section",{className:"loading",children:[Object(V.jsx)("h1",{children:"loading..."}),Object(V.jsx)("img",{src:z,alt:"loading"})]}):null}),Q=function(){return Object(V.jsxs)("div",{className:"home",children:[Object(V.jsx)($,{}),Object(V.jsx)(K,{}),Object(V.jsx)(q,{}),Object(V.jsx)(D,{})]})},Z={numberRegex:/\d/g,specialRegex:/[\s~`!@#$\xa3%\^&*+=\-\[\]\\';,/{}|\\":<>\?()\._]/g,usernameIsValid:function(e){return e.length>=6},passwordIsValid:function(e){return this.passwordLength(e)&&this.passwordContainsUpper(e)&&this.passwordContainsNumber(e)&&this.passwordContainsSpecial(e)},passwordLength:function(e){return e.length>=6},passwordContainsUpper:function(e){var t=this,n=e.split(""),c=!1;return n.forEach((function(e){t.numberRegex.test(e)||t.specialRegex.test(e)||e===e.toUpperCase()&&(c=!0)})),c},passwordContainsNumber:function(e){return this.numberRegex.test(e)},passwordContainsSpecial:function(e){return this.specialRegex.test(e)}},ee=(n(77),function(e){var t=e.username,n=e.password,s=e.setValidDetails;return Object(c.useEffect)((function(){Z.usernameIsValid(t)&&Z.passwordIsValid(n)?s(!0):s(!1)}),[t,n]),Object(V.jsxs)("div",{className:"details-validator",children:[Object(V.jsx)("p",{className:Z.usernameIsValid(t)?"satisfied":"unsatisfied",children:"Username must be at least 6 characters"}),Object(V.jsx)("p",{className:Z.passwordLength(n)?"satisfied":"unsatisfied",children:"Password must be at least 6 characters"}),Object(V.jsx)("p",{className:Z.passwordContainsUpper(n)?"satisfied":"unsatisfied",children:"Password must contain uppercase letter"}),Object(V.jsx)("p",{className:Z.passwordContainsNumber(n)?"satisfied":"unsatisfied",children:"Password must contain a number"}),Object(V.jsx)("p",{className:Z.passwordContainsSpecial(n)?"satisfied":"unsatisfied",children:"Password must contain a special character"})]})}),te=function(e){var t=e.heading,n=e.handleSubmit,s=e.requireValidation,r=B("text"),a=B("text"),i=Object(c.useState)(!1),o=Object(G.a)(i,2),u=o[0],l=o[1];return Object(V.jsxs)("div",{className:"user-details-form",children:[Object(V.jsx)("h1",{children:t}),Object(V.jsxs)("form",{onSubmit:function(e){return n(e,r.value,a.value)},children:[Object(V.jsx)("input",{type:"text",value:r.value,onChange:r.onChange,placeholder:"username"}),Object(V.jsx)("input",{type:"password",value:a.value,onChange:a.onChange,placeholder:"password"}),Object(V.jsx)("div",{className:"spacer"}),Object(V.jsx)("input",{type:"submit",className:"login-form-button ".concat(s?u?"show":"hide":"show")})]}),s&&Object(V.jsx)(ee,{username:r.value,password:a.value,setValidDetails:l})]})};n(78);!function(e){e[e.error=0]="error",e[e.message=1]="message"}(T||(T={}));var ne=function(e){var t=e.notification;return null===t?null:Object(V.jsx)("div",{className:"notification",children:Object(V.jsx)("h1",{className:(null===t||void 0===t?void 0:t.type)===T.message?"message":"error",children:t.message})})},ce=function(){var e=Object(c.useState)(null),t=Object(G.a)(e,2),n=t[0],s=t[1];return[n,function(e){console.log(e),s(e),setTimeout((function(){return s(null)}),5e3)}]},se=function(e){return Object(f.a)(h.a.mark((function t(){var n,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="".concat("http://localhost:3001","/api/login"),t.next=4,x.a.post(n,e);case 4:return c=t.sent,t.abrupt("return",c);case 8:throw t.prev=8,t.t0=t.catch(0),{e:t.t0};case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},re=function(){var e=ce(),t=Object(G.a)(e,2),n=t[0],c=t[1],s=function(){var e=Object(f.a)(h.a.mark((function e(t,n,s){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,se({username:n,password:s});case 3:return r=e.sent,console.log(r),a=null===r||void 0===r?void 0:r.data,console.log(a),c({type:T.message,message:"".concat(a.username," logged in successfully")}),e.abrupt("return");case 9:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(V.jsxs)("div",{className:"login-form",children:[Object(V.jsx)(ne,{notification:n}),Object(V.jsx)(te,{heading:"Login",handleSubmit:s,requireValidation:!1})]})},ae=function(e){var t=e.hidden,n=ce(),c=Object(G.a)(n,2),s=c[0],r=c[1];return Object(V.jsxs)("div",{className:"sign-up-form ".concat(t&&"hide"),children:[Object(V.jsx)(ne,{notification:s}),Object(V.jsx)("p",{children:"N.B. This app is designed for demo purposes only - passwords are hashed, but it is STRONGLY recommended not to use existing passwords"}),Object(V.jsx)(te,{heading:"Signup",handleSubmit:function(e,t,n){e.preventDefault(),r({type:T.message,message:"test"})},requireValidation:!0})]})},ie=(n(79),function(){var e=A(!0),t=Object(G.a)(e,2),n=t[0],c=t[1],s=n?"Signup":"Hide Signup";return Object(V.jsxs)("section",{className:"login",children:[Object(V.jsx)(re,{}),Object(V.jsx)("div",{className:"spacer"}),Object(V.jsx)("button",{onClick:c,children:s}),Object(V.jsx)(ae,{hidden:n}),Object(V.jsx)("div",{className:"spacer"})]})}),oe=function(){return Object(V.jsx)("nav",{children:Object(V.jsxs)("ul",{children:[Object(V.jsx)("li",{children:Object(V.jsx)(_.b,{to:"/",children:"RECIPES"})}),Object(V.jsx)("li",{children:Object(V.jsx)(_.b,{to:"/feed",children:"FEED"})}),Object(V.jsx)("li",{children:Object(V.jsx)(_.b,{to:"/login",children:"LOGIN"})})]})})},ue=(n(84),function(){return Object(V.jsxs)("header",{children:[Object(V.jsx)("h1",{children:"goustito"}),Object(V.jsx)(oe,{})]})}),le=(n(85),function(){return Object(V.jsx)("div",{className:"App",children:Object(V.jsxs)(_.a,{children:[Object(V.jsx)(ue,{}),Object(V.jsx)("div",{className:"page-content",children:Object(V.jsxs)(I.c,{children:[Object(V.jsx)(I.a,{exact:!0,path:"/",children:Object(V.jsx)(Q,{})}),Object(V.jsx)(I.a,{path:"/feed",children:Object(V.jsx)("h1",{children:"Feed"})}),Object(V.jsx)(I.a,{path:"/login",children:Object(V.jsx)(ie,{})})]})})]})})});n(86).config(),r.a.render(Object(V.jsx)(a.a,{store:P,children:Object(V.jsx)(le,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.2319a2c1.chunk.js.map